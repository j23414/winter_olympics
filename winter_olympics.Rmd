2014 Winter Olympics 
========================================================
Team: Jennifer Chang (jenchang), Samantha Tyner (sctyner), Junzhao Hu (junhu)

Excercise 1
-----------
* The Winter Olympics have just finished.  Time to look at the results.
* Go to the winter olympic games website.
* Navigate to the medal counts, [medal counts](http://www.sochi2014.com/en/medal-standings)
* Use the readHTMLTable() function of the XML library to pull out the medal table.
* Make a scatterplot matrix of the Gold, Silver, Bronze counts (like at the right?)
* Write a paragraph summarizing the association between medal counts.

Excercise 2
-----------
* Now look at the historical medals, but you should follow links in order to get to the history data
* Pull out the total number of medals for all of the years in the historical records.  Using these type of commands will help:
  * getNodeSet(root, "//option[@value])"  #hmm, this looks like a typo
  * ldplyr(yearsdetails,function(x) xmlAttrs(x)["value"])
* Make a parallel coordinate plot showing the medal tallies by year (like plot at right?).
* Write a paragraph summarizing what you elarn about historical medal tallies.

**Links:**
* [Class Website: http://dicook.github.io/stat585/index.html](http://dicook.github.io/stat585/index.html)
* [medal counts: http://www.sochi2014.com/en/medal-standings](http://www.sochi2014.com/en/medal-standings)

Jennifer Chang
```{r fig.width=7, fig.height=6}
# === Load Required Libraries ===
library(ggplot2)
#install.packages('XML')
library(XML)

# === Fetch 2014 Olympic Medal Counts ===
url<-"http://www.sochi2014.com/en/medal-standings"
tables<-readHTMLTable(url)
class(tables) # returns a list
medal.counts=tables[[1]]
head(medal.counts)

# === Scatterplot matrix of the Gold, Silver, and Bronze counts like example? ===
qplot(Gold, Country, data=medal.counts)
# will need to write a paragraph summarizing the association between metal counts

# === Get Historical Medals ===
# hmm actually http://www.sochi2014.com/en/medal-history?year=2010 is this year
year<-seq(from=1924, to=2010, by=4) #drat, this doesn't work, because some of the years are missing on the website... Oh well.

url<-"http://www.sochi2014.com/en/medal-history?year=2010"
doc<-htmlParse(url)
root<-xmlRoot(doc)
length(xmlChildren(root))
xmlName(xmlChildren(root)[[2]])
length(xmlChildren(xmlChildren(root)[[2]]))

s<-getNodeSet(doc, "select")
length(xmlChildren(s))
# looked at the html file
# <select name="year" size=10>
# <option value="2010" > Vancouver 2010</option>

```

Samantha Tyner
```{r fig.width=7, fig.height=6}
# place code here
library(ggplot2)
library(XML)
# === Fetch 2014 Olympic Medal Counts ===
url2014<-"http://www.sochi2014.com/en/medal-standings"
tables<-readHTMLTable(url2014)
class(tables) # returns a list
medal.counts=tables[[1]]
head(metal.counts)
medal.counts[,3]<-as.numeric(medal.counts[,3])
medal.counts[,4]<-as.numeric(medal.counts[,4])
medal.counts[,5]<-as.numeric(medal.counts[,5])
# === Scatterplot matrix of the Gold, Silver, and Bronze counts like example? ===
#install.packages('GGally')
library(GGally)
ggpairs(data=medal.counts,columns=3:5)
# will need to write a paragraph summarizing the association between metal counts
#stuff




# === Get Historical Medals ===
# hmm actually http://www.sochi2014.com/en/medal-history?year=2010 is this year
year<-seq(from=1924, to=2010, by=4) #drat, this doesn't work, because some of the years are missing on the website... Oh well.

url2010<-"http://www.sochi2014.com/en/medal-history?year=2010"
doc<-htmlParse(url2010)
root<-xmlRoot(doc)
length(xmlChildren(root))
xmlName(xmlChildren(root)[[2]])
length(xmlChildren(xmlChildren(root)[[2]]))

s<-getNodeSet(doc, "//option[@value >1920]")

# looked at the html file
# <select name="year" size=10>
# <option value="2010" > Vancouver 2010</option>

#http://www.sochi2014.com/en/medal-history?year=2006&sport=all

years<-ldply(s, function(x) xmlAttrs(x)["value"])

#strsplit('http://www.sochi2014.com/en/medal-history?year=2006','year=')[[1]][2]
URLS<-paste('http://www.sochi2014.com/en/medal-history?year=',years$value,sep='')

medal.df<-function(URL){
  medalcount<-readHTMLTable(URL)[[1]]
  n<-nrow(medalcount)
  year<-strsplit(URL,'year=')[[1]][2]
  yearcol<-rep(year,n)
  return(cbind(Year=yearcol,medalcount))
}

tables.all<-ldply(URLS,function(x) medal.df(x))
tables.all$Year<-as.numeric(as.character(tables.all$Year))
tables.all[,7]<-as.numeric(tables.all[,7])
tables.all[,6]<-as.numeric(tables.all[,6])
tables.all[,5]<-as.numeric(tables.all[,5])
tables.all[,4]<-as.numeric(tables.all[,4])

medal.counts$Year<-2014
medal.counts$Total<-as.numeric(medal.counts$Total)
medal.counts<-medal.counts[,c(7,1:6)]

all.medals<-rbind(medal.counts, tables.all)

qplot(data=all.medals,x=Year,y=Total,geom='line',group=Country)



```

Junzhao Hu
```{r fig.width=7, fig.height=6}
# place code here
x<-c(1:10)
```

